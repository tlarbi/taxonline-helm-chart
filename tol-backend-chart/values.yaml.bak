replicaCount: 2

image:
  repository: registry.taxonline.dz/taxonline/dashboard-backend
  tag: "1.0.0"
  pullPolicy: IfNotPresent

imagePullSecrets:
  - name: registry-credentials

service:
  type: ClusterIP
  port: 8000

# Nom du secret K8s à créer manuellement avant le déploiement
# Clés : SECRET_KEY, DATABASE_URL, REDIS_URL, S3_ACCESS_KEY, S3_SECRET_KEY
existingSecret: "dashboard-backend-secrets"

config:
  APP_NAME: "TaxOnline Dashboard API"
  DEBUG: "false"
  ALLOWED_ORIGINS: '["https://dashboard.taxonline.dz"]'
  QDRANT_HOST:       "qdrant-service"
  QDRANT_PORT:       "6333"
  QDRANT_COLLECTION: "tax_chunks"
  OPENSEARCH_HOST:   "opensearch-service"
  OPENSEARCH_PORT:   "9200"
  OPENSEARCH_INDEX:  "tax_chunks"
  OLLAMA_HOST:       "ollama-service"
  OLLAMA_PORT:       "11434"
  EMBED_MODEL:       "nomic-embed-text"
  S3_ENDPOINT:       "http://minio:9000"
  S3_BUCKET:         "taxonline-documents"
  S3_REGION:         "us-east-1"
  MIN_SCORE_THRESHOLD: "0.015"
  MIN_SYNC_RATE:       "0.95"

resources:
  requests:
    cpu: 200m
    memory: 256Mi
  limits:
    cpu: 1000m
    memory: 512Mi

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 8
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000

nameOverride: ""
fullnameOverride: ""
nodeSelector: {}
tolerations: []
affinity: {}
